import unittest
try:
    from A_star__eksamens_projekt import Kort, A_star
    print(" Klasserne blev importeret succesfuldt!")
except ImportError as fejl:
    print("x FEJL: Kunne ikke importere  filen A_star__eksamens_projekt.py eller klasserne Kort og A_star!")
    # Detaljeret fejlbeskeder
    exit(1)

# ========== FØRSTE TEST-KLASSE: TESTER KORT-KLASSEN ==========
class TestKort(unittest.TestCase):


    def setUp(self):
    
        # Lav en screen-variabel og sæt den til None
        # (Vi skal ikke tegne noget under test, så None er fin)
        self.screen = None
        
        # Lav et Kort-objekt som skal testes
        # Vi giver det self.screen (som er None) som parameter
        self.kort = Kort(self.screen)


    def test_definere_kortet(self):

        
        # STEP 1: Kald definere_kortet() med seed 5
        # seed = frø til Perlin noise - samme seed giver samme kort hver gang
        self.kort.definere_kortet(5)
        
        # STEP 2: Tjek at felt_data har data
        # len() tæller hvor mange rækker listen har
        # > 0 betyder "større end 0" (altså ikke tom)
        # self.assertTrue() tjekker at udsagnet er True
        # 
        # Eksempel:
        # Hvis felt_data har 80 rækker: len=80, 80>0=True → TEST PASS ✓
        # Hvis felt_data er tom: len=0, 0>0=False → TEST FAIL ✗
        self.assertTrue(len(self.kort.felt_data) > 0)
        


# ========== ANDEN TEST-KLASSE: TESTER A_STAR-KLASSEN ==========
class TestAStar(unittest.TestCase):
  

    def setUp(self):
       
        
        # Her forberederes både Kort og A_star objekter
        # fordi A_star har brug for et Kort for at virke.
  
        
        # STEP 1: Lav et Kort-objekt
        # None betyder vi ikke skal tegne på skærmen
        self.kort = Kort(None)
        
        # STEP 2: Generer kortet med seed 5
        # seed=5 betyder samme kort hver gang (reproducerbar)
        self.kort.definere_kortet(5)
        
        # STEP 3: Lav et A_star-objekt
        # A_star-klassen bruger kortet til at tjekke terræn-priserne
        # Derfor giver vi kortet som parameter: A_star(self.kort)
        self.astar = A_star(self.kort)


    def test_heuristik(self):
     
        
        # STEP 1: Kald heuristik-funktionen
        # Hvor langt er der fra (0,0) til (1,1)?
        resultat = self.astar.heuristik((0, 0), (2, 1))
        
        # STEP 2: Tjek at resultatet er 2
        # self.assertEqual(a, b) tjekker at a er lig med b
        self.assertEqual(resultat, 2.41)


# ========== MAIN: START TEST-RUNNEREN ==========
if __name__ == "__main__":
  
    unittest.main()
